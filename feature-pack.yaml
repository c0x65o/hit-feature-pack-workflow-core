# Feature Pack: workflows
# A HIT feature pack

name: workflows
description: A HIT feature pack

# ─────────────────────────────────────────────────────────────────────────────
# ROUTES - Frontend page routes
# ─────────────────────────────────────────────────────────────────────────────
routes:
  - path: /workflows
    page: Dashboard
    roles: []

# ─────────────────────────────────────────────────────────────────────────────
# NAVIGATION - Sidebar/topbar items
# ─────────────────────────────────────────────────────────────────────────────
nav:
  - id: workflows
    label: workflows
    path: /workflows
    icon: Package
    group: main
    weight: 100
    showWhen: authenticated

# ─────────────────────────────────────────────────────────────────────────────
# SCHEMA - Drizzle ORM table definitions
# ─────────────────────────────────────────────────────────────────────────────
schema:
  source: src/schema/workflows.ts
  exports:
    - principalTypeEnum
    - workflows
    - workflowVersions
    - workflowAcls
    - WORKFLOW_PERMISSIONS
    - WorkflowPermission
    - Workflow
    - InsertWorkflow
    - WorkflowVersion
    - InsertWorkflowVersion
    - WorkflowAcl
    - InsertWorkflowAcl

# ─────────────────────────────────────────────────────────────────────────────
# API ROUTES - Backend endpoints
# ─────────────────────────────────────────────────────────────────────────────
api:
  routes:
    - path: /api/workflows
      methods: [GET, POST]
      handler: "@hit/feature-pack-workflows/server/api/workflows"
      description: "List workflows (GET) or create workflow (POST)"
    - path: /api/workflows/[id]
      methods: [GET, PUT]
      handler: "@hit/feature-pack-workflows/server/api/workflows-id"
      description: "Get or update a workflow (includes current draft version)"
    - path: /api/workflows/[id]/publish
      methods: [POST]
      handler: "@hit/feature-pack-workflows/server/api/workflows-id-publish"
      description: "Publish a new immutable version from the current draft"
    - path: /api/workflows/[id]/acl
      methods: [GET, POST]
      handler: "@hit/feature-pack-workflows/server/api/workflows-id-acl"
      description: "List (GET) or create (POST) ACL entries for a workflow"
    - path: /api/workflows/[id]/acl/[aclId]
      methods: [DELETE]
      handler: "@hit/feature-pack-workflows/server/api/workflows-id-acl-id"
      description: "Delete a workflow ACL entry"

# ─────────────────────────────────────────────────────────────────────────────
# DEPENDENCIES
# ─────────────────────────────────────────────────────────────────────────────
requires:
  modules: []

dependencies:
  feature_packs:
    - name: dashboard-shell
